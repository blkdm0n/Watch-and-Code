<!DOCTYPE html>
<html>
  <head>
    <title>Practical JavaScript</title>
  </head>
  
  
  <body>
    <button id="display-todos-button">displayTodos</button>
    <br><br>
    <button id="toggle-all-button">toggleAll</button>
    <br><br>
    <input type="text" id="initial-todo-text" placeholder="todo text"></input>
    <button id="add-todo-button">add todo</button>
    <br><br>
    <input type="text" id="edited-todo-text" placeholder="edited todo text"></input>
    <input type="number" id="todo-index" placeholder="index of todo to be edited"></input>
    <button id="edit-todo-button">edit todo</button>
    <br><br>
    <input type="number" min="0" id="deleted-todo-index" placeholder="index of todo to be deleted"></input>
    <button id="delete-todo-button">delete todo</button>
    <br><br>
    <input type="number" min="0" id="toggle-todo" placeholder="index of todo to be toggled">
      <button id="toggle-button">toggle todo</button>
    </input>
    
    <script>
      var todos = [
        {todoText:'item1',
         completed: false
        },
        {todoText:'item2',
         completed: false
        },
        {todoText:'item3',
         completed: false
        }];

      displayTodos()

      function add (initialTodoText) {
        todos.push({
          todoText: initialTodoText,
          completed: false
         });
         displayTodos();
      }

      function edit(index, newTodoText){
        todos[index].todoText = newTodoText;
        displayTodos();
      }
      function toggle(index) {
        var currentStatus = todos[index].completed
        if (!currentStatus) {
          todos[index].completed = true;
        } else {
          todos[index].completed = false;
        }
        displayTodos();
      }

      function deleteTodo (index) {
        todos.splice(index, 1);
        displayTodos();
      }

      function displayTodos () {
        todos.forEach(todo => {
          if (todo.completed) {
            console.log(`[x] ${todo.todoText}`)
          } else {
            console.log(`[ ] ${todo.todoText}`)
          }
        })
      }

      function toggleAll () {
        var isCompleted = todos.every(todo => todo.completed === true)

        todos.forEach(todo => {
          if (isCompleted) {
            todo.completed = false
          } else {
            todo.completed  = true
          }
        })
        displayTodos()
      }
      var displayTodosButton = document.getElementById("display-todos-button")
      displayTodosButton.addEventListener('click', displayTodos)

      var toggleAllButton = document.getElementById("toggle-all-button")
      toggleAllButton.addEventListener('click', toggleAll)
      
      var addTodoButton = document.getElementById("add-todo-button")
      addTodoButton.addEventListener('click', () => {
        var todoText = document.getElementById("initial-todo-text")
        add(todoText.value)
        document.getElementById('initial-todo-text').value = ''
      })

      var editTodoButton = document.getElementById("edit-todo-button")
      editTodoButton.addEventListener('click', () => {
        var newTodoText = document.getElementById('edited-todo-text').value
        var index = document.getElementById('todo-index').value
        edit(index, newTodoText)
        document.getElementById('edited-todo-text').value = ''
        document.getElementById('todo-index').value = ''
      })

      var deleteTodoButton = document.getElementById('delete-todo-button')
      deleteTodoButton.addEventListener('click', ()=> {
        var index = document.getElementById('deleted-todo-index').value
        deleteTodo(index)
        document.getElementById('deleted-todo-index').value = ''
      })

      var toggleButton = document.getElementById('toggle-button')
      toggleButton.addEventListener('click', function () {
        var index = Number(document.getElementById('toggle-todo').value)
        toggle(index)
        document.getElementById('toggle-todo').value = ''
      })     
    </script>
    
  </body>
</html>